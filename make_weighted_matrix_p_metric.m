function metric_handle = make_weighted_matrix_p_metric(W, p)
    metric_handle = @(x, y) ( ...
        sum(abs(W*[x;y]).^p) ...
    ).^(1/p);
end